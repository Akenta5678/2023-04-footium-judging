Tricko

high

# Possible incompatibility with Arbitrum network.

## Summary
Contracts' version pragma is too extensive, allowing Footium contracts to be compiled in the near future on solidity `>= 0.8.20`, which is incompatible with the current state of Arbitrum network due to the `PUSH0` opcode.

## Vulnerability Detail
The new solidity compiler 0.8.20, which should be released in the next few months, will enable support for the `PUSH0`Â opcode ([EIP-3855](https://eips.ethereum.org/EIPS/eip-3855)), introduced in the recent Shanghai fork, and therefore will generate bytecode containing it. However some EVM-compatible chains still don't support it.

At the time of writing this report, Arbitrum [latest release](https://github.com/OffchainLabs/nitro/releases/tag/v2.0.14) is built upon their [forked version of geth](https://github.com/OffchainLabs/go-ethereum/tree/d52739e6d54f2ea06146fdc44947af3488b89082) (commit hash d52739e6d54f2ea06146fdc44947af3488b89082). This commit does not contains the necessary changes to handle the new `PUSH0` opcode. There is an open [PR](https://github.com/OffchainLabs/nitro/pull/1583) to introduce the necessary changes, but until this PR is merged and the updated release is avaliable for the node operators, Arbitrum won't be able to handle contract bytecode containing the `PUSH0` opcode.

All of the Footium contract contain the following version pragma `^0.8.16;` which is the same as `>=0.8.16 <0.9.0`. So if in the near future Footium contracts are compiled with solidity versions `>=0.8.20` (which the current version pragma allows), there is high possibility that the compiled bytecode will contain `PUSH0`. Therefore some or all of the contract methods will fail on Arbitrum, affecting the protocol functionality and leading to possible loss of funds.

## Impact
As described above, code compiled with solidity `>= 0.8.20` will generate incompatible bytecode with Arbitrum's EVM, affecting the protocol funcionality until support for the Shanghai fork is enabled. For example:
- Loss of funds to users as when the undefined opcode is reached during execution, the state changes are reverted but the remaining gas is not refunded to the caller.
- Some contract methods might work as normal (those functions whose bytecode does not contain the `PUSH0` opcode), while some will always fail (those functions whose bytecode contains the `PUSH0` opcode) leading to scenarios where funds get trapped inside the contract. There is no way to predict which methods will be affected beforehand, as the generated bytecode is dependent on many configurations (if inliner is turned on, number of optimizer runs, if viaIR is set to true, etc), but as an example consider the following scenario in the `FootiumPrizeDistributor` contract. Suppose that the `receive` method works as normal, but the `claimETHPrize` does not. So any ETH sent to the contract to be distributed as prizes will be stuck there as there is no way to claim the prizes.

## Code Snippet
https://github.com/sherlock-audit/2023-04-footium/blob/main/footium-eth-shareable/contracts/FootiumAcademy.sol#L2

https://github.com/sherlock-audit/2023-04-footium/blob/main/footium-eth-shareable/contracts/FootiumClub.sol#L2

https://github.com/sherlock-audit/2023-04-footium/blob/main/footium-eth-shareable/contracts/FootiumClubMinter.sol#L2

https://github.com/sherlock-audit/2023-04-footium/blob/main/footium-eth-shareable/contracts/FootiumEscrow.sol#L2

https://github.com/sherlock-audit/2023-04-footium/blob/main/footium-eth-shareable/contracts/FootiumGeneralPaymentContract.sol#L2

https://github.com/sherlock-audit/2023-04-footium/blob/main/footium-eth-shareable/contracts/FootiumPlayer.sol#L2

https://github.com/sherlock-audit/2023-04-footium/blob/main/footium-eth-shareable/contracts/FootiumPrizeDistributor.sol#L2

https://github.com/sherlock-audit/2023-04-footium/blob/main/footium-eth-shareable/contracts/FootiumToken.sol#L2

## Tool used
Manual Review

## Recommendation
Consider restricting the solidity version pragma (`pragma solidity >=0.8.16 <0.8.20;`)
